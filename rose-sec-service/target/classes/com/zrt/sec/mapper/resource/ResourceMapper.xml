<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zrt.sec.mapper.resource.ResourceMapper" >
	<!--查询所有的功能-->
	<select id="resourceList" resultType="java.util.HashMap">
        SELECT  ssr.resource_id,ssr.resource_url,ssr.menu_code,ssr.resource_name,ssm.menu_code,ssm.menu_level,ssm.menu_name,ssm.menu_url,ssm.parent_code,ssm.root_menu_code
		FROM 
		sys_sec_resource ssr,
		sys_sec_menu ssm
		WHERE 
		ssr.menu_code=ssm.menu_code
		AND ssr.sec_enabled='1'
		AND ssm.sec_enabled='1'
		<if test="root_menu_code!=null and root_menu_code!=''">
	         and ssm.root_menu_code = #{root_menu_code}
		</if>
		ORDER BY ssr.menu_code
	</select>
	<!--查询所有的功能(只查菜单20171222修改)-->
	<select id="menuAllList" resultType="java.util.HashMap">
        SELECT
			ssm.menu_code,
			ssm.menu_name,
			ssm.menu_level,
			ssm.parent_code
		FROM
			sys_sec_menu ssm
		WHERE
			ssm.menu_level != '1' AND ssm.sec_enabled='1'
			AND ssm.root_menu_code =#{root_menu_code}
		ORDER BY ssm.menu_code
	</select>
	<!--查询角色绑定的角色资源下的按钮(20180113)-->
	<select id="rsList" resultType="java.util.HashMap">
        SELECT
			ssr.resource_id,
			ssr.resource_name
		FROM
			sys_sec_resource ssr
		WHERE
			ssr.sec_enabled = '1'
		AND ssr.menu_code = #{menu_code}
		ORDER BY ssr.resource_id
	</select>
</mapper>