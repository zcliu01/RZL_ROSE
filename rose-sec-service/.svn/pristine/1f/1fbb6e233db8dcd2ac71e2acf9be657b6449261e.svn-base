package com.zrt.sec.service.relation;

import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.zrt.mybatis.domain.SysSecOrg;
import com.zrt.mybatis.mapper.SysSecOrgMapper;
import com.zrt.sec.mapper.user.UserMapper;

/**
 * Created by dwliu on 2017/9/14.
 */
@Service
public class RelationServiceImpl implements RelationService {

	@Autowired
	private SysSecOrgMapper sysSecOrgMapper;
	@Autowired
	private UserMapper userMapper;

	@Override
	public void relationUpdate(Map<String, Object> appMap) throws Exception {

		Map<String, Object> orgMap = userMapper.manageSearch(appMap);
		if (!orgMap.isEmpty()) {
			String orgId = (String) orgMap.get("org_id");
			SysSecOrg sysSecOrg = sysSecOrgMapper.selectByPrimaryKey(orgId);
			sysSecOrg.setChargeEmpId((String)appMap.get("charge_emp_id"));
			sysSecOrg.setChargeEmpName((String)appMap.get("charge_emp_name"));
			sysSecOrg.setManageEmpId((String)appMap.get("manage_emp_id"));
			sysSecOrg.setManageEmpName((String)appMap.get("manage_emp_name"));
			sysSecOrgMapper.updateByPrimaryKeySelective(sysSecOrg);
		}
	}

	@Override
	public Map<String, Object> relationSearch(Map<String, Object> appMap) throws Exception {
		Map<String, Object> dataMap = userMapper.manageSearch(appMap);
		return dataMap;
	}

	@Override
	public Map<String, Object> upManageSearch(Map<String, Object> appMap) throws Exception {
		Map<String, Object> dataMap = userMapper.upManageSearch(appMap);
		return dataMap;
	}

}
